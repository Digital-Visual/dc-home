!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){var r;r=!1,DC||console.error("missing dc sdk"),DC.getNamespace().mapv=window.mapv||void 0,delete window.mapv,DC.init((function(){!r&&n(2),r=!0}))},function(e,t,n){"use strict";n.r(t);var r=window.DC.getNamespace().Cesium;function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}DC.GlobeRotate=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;o(this,e),this._viewer=t,this._time=r,this._callback=i,this._startRotate();var a=setTimeout((function(){n._endRotate(),n._callback&&n._callback(),clearTimeout(a)}),1e3*Number(this._time))}var t,n,a;return t=e,(n=[{key:"_icrf",value:function(e,t){if(e.mode===r.SceneMode.SCENE3D){var n=r.Transforms.computeIcrfToFixedMatrix(t);if(r.defined(n)){var o=this._viewer.delegate.camera,i=r.Cartesian3.clone(o.position),a=r.Matrix4.fromRotationTranslation(n);o.lookAtTransform(a,i)}}}},{key:"_startRotate",value:function(){this._viewer.delegate.camera.lookAtTransform(r.Matrix4.IDENTITY),this._viewer.delegate.clock.multiplier=12e3,this._viewer.delegate.scene.postUpdate.addEventListener(this._icrf,this)}},{key:"_endRotate",value:function(){this._viewer.delegate.camera.lookAtTransform(r.Matrix4.IDENTITY),this._viewer.delegate.clock.multiplier=1,this._viewer.delegate.clock.currentTime=r.JulianDate.now().clone(),this._viewer.delegate.scene.postUpdate.removeEventListener(this._icrf,this)}}])&&i(t.prototype,n),a&&i(t,a),e}();var u={resolution:1,material:new r.PolylineGlowMaterialProperty({glowPower:.1,color:r.Color.YELLOW}),width:10};function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}DC.Roaming=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._viewer=t,this._positions=[],this._modelPath=n.modelPath,this._modelScale=n.modelScale||1,this._modelShow=n.modelShow||!0,this._time=n.time||360,this._startTime=void 0,this._endTime=void 0,this._showPath=n.showPath||!1,this._delegate=new r.Entity,this._perspective=n.perspective||0,this._parsePositions(n.positions)}var t,n,o;return t=e,(n=[{key:"_parsePositions",value:function(e){if("string"==typeof e){if(e.indexOf("#")>=0)throw new Error("the positions invalid");e=e.split(";")}this._positions=e.map((function(e){return Array.isArray(e)?DC.Position.fromCoordArray(e):DC.Position.fromCoordString(e)}))}},{key:"_preparePositionProperty",value:function(){var e=this,t=new r.SampledPositionProperty;if(this._positions.length){var n=this._time-this._time%this._positions.length;this._startTime=r.JulianDate.now();var o=n/this._positions.length;this._endTime=r.JulianDate.addSeconds(this._startTime,n,new r.JulianDate),this._positions.forEach((function(n,i){var a=r.JulianDate.addSeconds(e._startTime,i*o,new r.JulianDate);t.addSample(a,DC.T.transformWSG84ToCartesian(n))}))}return t}},{key:"_prepareDelegate",value:function(){var e=this._preparePositionProperty();this._delegate.merge({position:e,orientation:new r.VelocityOrientationProperty(e),model:{uri:this._modelPath,scale:this._modelScale,show:this._modelShow},path:s({},u,{show:this._showPath})}),this._startTime&&this._endTime&&(this._delegate.availability=new r.TimeIntervalCollection([new r.TimeInterval({start:this._startTime,stop:this._endTime})])),this._delegate.position.setInterpolationOptions({interpolationDegree:5,interpolationAlgorithm:r.LagrangePolynomialApproximation})}},{key:"_setClock",value:function(){this._viewer.delegate.clock.startTime=this._startTime.clone(),this._viewer.delegate.clock.stopTime=this._endTime.clone(),this._viewer.delegate.clock.currentTime=this._startTime.clone(),this._viewer.delegate.clock.clockRange=r.ClockRange.UNBOUNDED}},{key:"setSpeed",value:function(e){this._viewer.delegate.clock.multiplier=e}},{key:"setPerspective",value:function(e){this._perspective=e,this._delegate.model&&(0===e?this._viewer.delegate.trackedEntity=this._delegate:1===e&&(this._viewer.delegate.trackedEntity=void 0,this._viewer.delegate.zoomTo(this._delegate,new r.HeadingPitchRange(0,r.Math.toRadians(-90)))))}},{key:"reset",value:function(){this._prepareDelegate(),this._setClock(),this._viewer.delegate.clock.multiplier=1}},{key:"start",value:function(){this._viewer.delegate.entities.remove(this._delegate),this._prepareDelegate(),this._setClock(),this._viewer.delegate.entities.add(this._delegate)}},{key:"stop",value:function(){this._viewer.delegate.entities.remove(this._delegate),this._viewer.delegate.clock.multiplier=1,this._viewer.delegate.trackedEntity=void 0}}])&&c(t.prototype,n),o&&c(t,o),e}();var p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._viewer=t.viewer,this._handler=t.handler,this._plotEvent=t.plotEvent,this._layer=t.layer,this._delegate=new r.Entity}var t,n,o;return t=e,(n=[{key:"_bindEvent",value:function(){var e=this;this._handler.setInputAction((function(t){e._mouseClickHandler&&e._mouseClickHandler(t)}),r.ScreenSpaceEventType.LEFT_CLICK),this._handler.setInputAction((function(t){e._mouseMoveHandler&&e._mouseMoveHandler(t)}),r.ScreenSpaceEventType.MOUSE_MOVE),this._handler.setInputAction((function(t){e._mouseDbClickHandler&&e._mouseDbClickHandler(t)}),r.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)}},{key:"_unbindEnvet",value:function(){this._handler.removeInputAction(r.ScreenSpaceEventType.LEFT_CLICK),this._handler.removeInputAction(r.ScreenSpaceEventType.MOUSE_MOVE),this._handler.removeInputAction(r.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)}},{key:"_prepareDelegate",value:function(){}},{key:"start",value:function(){this._bindEvent(),this._prepareDelegate()}}])&&f(t.prototype,n),o&&f(t,o),e}();function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var O={pixelSize:10,outlineColor:r.Color.BLUE,outlineWidth:5},w=function(e){function t(e,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=d(this,g(t).call(this,e)))._position=r.Cartesian3.ZERO,o._style=_({},O,{},n),o}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,e),n=t,(o=[{key:"_mouseClickHandler",value:function(e){this._position=this._viewer.delegate.scene.camera.pickEllipsoid(e.position,r.Ellipsoid.WGS84),this._unbindEnvet(),this._plotEvent.raiseEvent({type:DC.OverlayType.POINT,points:[DC.T.transformCartesianToWSG84(this._position)]})}},{key:"_mouseMoveHandler",value:function(e){this._viewer.tooltip.setContent("单击选择点位"),this._position=this._viewer.delegate.scene.camera.pickEllipsoid(e.endPosition,r.Ellipsoid.WGS84),this._viewer.tooltip.setPosition(this._position)}},{key:"_prepareDelegate",value:function(){var e=this;this._delegate.position=new r.CallbackProperty((function(t){return e._position})),this._delegate.point=_({},this._style),this._layer.entities.add(this._delegate)}}])&&b(n.prototype,o),i&&b(n,i),t}(p);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var A={width:3,material:r.Color.BLUE.withAlpha(.6)},L=function(e){function t(e,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=D(this,S(t).call(this,e)))._tempLine=new r.Entity,o._positions=[],o._tempPoints=[],o._style=P({},A,{},n),o}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,e),n=t,(o=[{key:"_mouseClickHandler",value:function(e){var t=this._viewer.delegate.scene.camera.pickEllipsoid(e.position,r.Ellipsoid.WGS84);t&&this._positions.push(t)}},{key:"_mouseMoveHandler",value:function(e){this._viewer.tooltip.setContent("单击选择点位,双击结束");var t=this._viewer.delegate.scene.camera.pickEllipsoid(e.endPosition,r.Ellipsoid.WGS84);this._viewer.tooltip.setPosition(t),t&&this._positions.length>0&&(this._viewer.tooltip.setPosition(t),this._tempPoints=[this._positions[this._positions.length-1],t])}},{key:"_mouseDbClickHandler",value:function(e){this._unbindEnvet(),this._positions.length>2&&(this._positions=this._positions.slice(0,-1)),this._plotEvent.raiseEvent({type:DC.OverlayType.POLYLINE,points:DC.T.transformCartesianArrayToWSG84Array(this._positions)})}},{key:"_prepareDelegate",value:function(){var e=this;this._delegate.polyline=P({positions:new r.CallbackProperty((function(t){return e._positions}))},this._style),this._tempLine.polyline=P({positions:new r.CallbackProperty((function(t){return e._tempPoints}))},this._style),this._layer.entities.add(this._delegate),this._layer.entities.add(this._tempLine)}}])&&j(n.prototype,o),i&&j(n,i),t}(p);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var U={material:r.Color.BLUE.withAlpha(.6)},B=function(e){function t(e,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=H(this,N(t).call(this,e)))._hierarchy=new r.PolygonHierarchy,o._positions=[],o._tempPoints=[],o._style=W({},U,{},n),o}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,e),n=t,(o=[{key:"_mouseClickHandler",value:function(e){var t=this._viewer.delegate.scene.camera.pickEllipsoid(e.position,r.Ellipsoid.WGS84);t&&(2===this._positions.length&&(this._delegate.polyline.show=!1),this._positions.push(t),this._hierarchy.positions=this._positions)}},{key:"_mouseMoveHandler",value:function(e){this._viewer.tooltip.setContent("单击选择点位,双击结束");var t=this._viewer.delegate.scene.camera.pickEllipsoid(e.endPosition,r.Ellipsoid.WGS84);this._viewer.tooltip.setPosition(t),t&&this._positions.length>0&&(this._tempPoints=[this._positions[this._positions.length-1],t],this._hierarchy.positions=[].concat(M(this._positions),[t]))}},{key:"_mouseDbClickHandler",value:function(e){this._unbindEnvet(),this._positions.length>2&&(this._positions=this._positions.slice(0,-1)),this._plotEvent.raiseEvent({type:DC.OverlayType.POLYGON,points:DC.T.transformCartesianArrayToWSG84Array(this._positions)})}},{key:"_prepareDelegate",value:function(){var e=this;this._delegate.polygon=W({hierarchy:new r.CallbackProperty((function(t){return e._hierarchy}))},this._style),this._delegate.polyline=W({positions:new r.CallbackProperty((function(t){return e._tempPoints}))},this._style),this._layer.entities.add(this._delegate)}}])&&G(n.prototype,o),i&&G(n,i),t}(p);function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){K(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var X={width:3,material:r.Color.BLUE.withAlpha(.6)},$=function(e){function t(e,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=J(this,q(t).call(this,e)))._center=r.Cartesian3.ZERO,o._radius=0,o._style=Z({},X,{},n),o}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(t,e),n=t,(o=[{key:"_mouseClickHandler",value:function(e){var t=this._viewer.delegate.scene.camera.pickEllipsoid(e.position,r.Ellipsoid.WGS84);t&&this._center===r.Cartesian3.ZERO?this._center=t:(this._computeRadius(this._center,t),this._unbindEnvet(),this._plotEvent.raiseEvent({type:DC.OverlayType.CIRCLE,points:[DC.T.transformCartesianToWSG84(this._center)],radius:this._radius}))}},{key:"_mouseMoveHandler",value:function(e){this._viewer.tooltip.setContent("单击选择点位");var t=this._viewer.delegate.scene.camera.pickEllipsoid(e.endPosition,r.Ellipsoid.WGS84);this._viewer.tooltip.setPosition(t),t&&this._center!==r.Cartesian3.ZERO&&this._computeRadius(this._center,t)}},{key:"_computeRadius",value:function(e,t){var n=r.Cartographic.fromCartesian(e),o=r.Cartographic.fromCartesian(t),i=new r.EllipsoidGeodesic;i.setEndPoints(n,o);var a=i.surfaceDistance;this._radius=Math.sqrt(Math.pow(a,2)+Math.pow(o.height-n.height,2))}},{key:"_prepareDelegate",value:function(){var e=this;this._delegate.position=new r.CallbackProperty((function(t){return e._center})),this._delegate.ellipse=Z({semiMajorAxis:new r.CallbackProperty((function(t){return e._radius})),semiMinorAxis:new r.CallbackProperty((function(t){return e._radius}))},this._style),this._delegate.point={pixelSize:10,outlineColor:r.Color.RED,outlineWidth:3},this._layer.entities.add(this._delegate)}}])&&F(n.prototype,o),i&&F(n,i),t}(p);function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ce={material:r.Color.BLUE.withAlpha(.6)},ue=function(e){function t(e,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=ae(this,se(t).call(this,e)))._coordinates=new r.Rectangle,o._positions=[],o._style=re({},ce,{},n),o}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(t,e),n=t,(o=[{key:"_mouseClickHandler",value:function(e){var t=this._viewer.delegate.scene.camera.pickEllipsoid(e.position,r.Ellipsoid.WGS84);t&&(this._positions.push(t),2===this._positions.length&&(this._coordinates=r.Rectangle.fromCartesianArray(this._positions,r.Ellipsoid.WGS84),this._unbindEnvet(),this._plotEvent.raiseEvent({type:DC.OverlayType.RECT,points:DC.T.transformCartesianArrayToWSG84Array(this._positions)})))}},{key:"_mouseMoveHandler",value:function(e){this._viewer.tooltip.setContent("单击选择点位");var t=this._viewer.delegate.scene.camera.pickEllipsoid(e.endPosition,r.Ellipsoid.WGS84);t&&(this._viewer.tooltip.setPosition(t),this._coordinates=r.Rectangle.fromCartesianArray([].concat(te(this._positions),[t]),r.Ellipsoid.WGS84))}},{key:"_prepareDelegate",value:function(){var e=this;this._delegate.rectangle=re({coordinates:new r.CallbackProperty((function(t){return e._coordinates}))},this._style),this._layer.entities.add(this._delegate)}}])&&ie(n.prototype,o),i&&ie(n,i),t}(p);function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}DC.Plot=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._viewer=t,this._plotEvent=new r.Event,this._handler=new r.ScreenSpaceEventHandler(this._viewer.canvas),this._callback=void 0,this._drawWorker=void 0,this._editWorker=void 0,this._layer=new r.CustomDataSource("dc-plot"),this._viewer.delegate&&this._viewer.delegate.dataSources.add(this._layer)}var t,n,o;return t=e,(n=[{key:"_completeCallback",value:function(e){this._drawWorker=void 0,this._viewer.tooltip.enable=!1,this._layer.entities.removeAll(),this._callback&&this._callback.call(this,e)}},{key:"_bindEvent",value:function(e){this._plotEvent.removeEventListener(this._completeCallback,this),this._callback=e,this._plotEvent.addEventListener(this._completeCallback,this)}},{key:"_createDrawWorker",value:function(e,t){var n={viewer:this._viewer,handler:this._handler,plotEvent:this._plotEvent,layer:this._layer};e===DC.OverlayType.POINT?this._drawWorker=new w(n,t):e===DC.OverlayType.POLYLINE?this._drawWorker=new L(n,t):e===DC.OverlayType.POLYGON?this._drawWorker=new B(n,t):e===DC.OverlayType.CIRCLE?this._drawWorker=new $(n,t):e===DC.OverlayType.RECT&&(this._drawWorker=new ue(n,t))}},{key:"_createEditWorker",value:function(e){this._viewer,this._handler,this._plotEvent,this._layer}},{key:"draw",value:function(e,t,n){this._viewer.tooltip.enable=!0,this._bindEvent(t),this._createDrawWorker(e,n),this._drawWorker.start()}},{key:"edit",value:function(e,t){this._bindEvent(callback)}}])&&fe(t.prototype,n),o&&fe(t,o),e}();var ye=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventCache={}}var t,n,r;return t=e,(n=[{key:"_registerEvent",value:function(){}},{key:"_on",value:function(e,t,n){var r=this.getEvent(e);t&&r&&r.addEventListener(t,n||this)}},{key:"_off",value:function(e,t,n){var r=this.getEvent(e);t&&r&&r.removeEventListener(t,n||this)}},{key:"_fire",value:function(e,t){var n=this.getEvent(e);n&&n.raiseEvent(t)}},{key:"on",value:function(e,t,n){return this._on(e,t,n),this}},{key:"off",value:function(e,t,n){return this._off(e,t,n),this}},{key:"fire",value:function(e,t){return this._fire(e,t),this}},{key:"getEvent",value:function(e){return this._eventCache[e]||void 0}}])&&pe(t.prototype,n),r&&pe(t,r),e}();function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e,t){return!t||"object"!==he(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ge=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=ve(this,be(t).call(this)))._registerEvent(),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(t,e),n=t,(o=[{key:"_registerEvent",value:function(){for(var e in DC.LayerEventType){var t=DC.LayerEventType[e];this._eventCache[t]=new r.Event}}}])&&_e(n.prototype,o),i&&_e(n,i),t}(ye);function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Oe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=t||DC.Util.uuid(),this._delegate=void 0,this._viewer=void 0,this._state=void 0,this._show=!0,this._cache={},this._attr={},this._layerEvent=new ge,this._layerEvent.on(DC.LayerEventType.ADD,this._addCallback,this),this._layerEvent.on(DC.LayerEventType.REMOVE,this._removeCallback,this),this._layerEvent.on(DC.LayerEventType.ADD_OVERLAY,this._addOverlayCallback,this),this._layerEvent.on(DC.LayerEventType.REMOVE_OVERLAY,this._removeOverlayCallback,this),this.type=void 0}var t,n,o;return t=e,(n=[{key:"_addCallback",value:function(e){this._viewer=e,this._delegate&&this._delegate instanceof r.PrimitiveCollection?(this._viewer.delegate.scene.primitives.add(this._delegate),this._state=DC.LayerState.ADDED):this._delegate&&(this._viewer.delegate.dataSources.add(this._delegate),this._state=DC.LayerState.ADDED)}},{key:"_removeCallback",value:function(){this._viewer&&(this._cache={},this._delegate&&this._delegate instanceof r.CustomDataSource?(this._delegate.entities.removeAll(),this._viewer.delegate.dataSources.remove(this._delegate),this._state=DC.LayerState.REMOVED):this._delegate&&this._delegate instanceof r.PrimitiveCollection&&(this._delegate.removeAll(),this._viewer.delegate.scene.primitives.remove(this._delegate),this._state=DC.LayerState.REMOVED))}},{key:"_addOverlayCallback",value:function(e){e&&e.overlayEvent&&e.state!==DC.OverlayState.ADDED&&(e.overlayEvent.fire(DC.OverlayEventType.ADD,this),this._cache[e.id]=e)}},{key:"_removeOverlayCallback",value:function(e){e&&e.overlayEvent&&e.state!==DC.OverlayState.REMOVED&&(e.overlayEvent.fire(DC.OverlayEventType.REMOVE,this),delete this._cache[e.id])}},{key:"addOverlay",value:function(e){return this._addOverlayCallback(e),this}},{key:"removeOverlay",value:function(e){return this._removeOverlayCallback(e),this}},{key:"getOverlay",value:function(e){return this._cache[e]||void 0}},{key:"getOverlayByAttr",value:function(e,t){var n=void 0;for(var r in this._cache)this._cache[r].attr[e]===t&&(n=this._cache[r]);return n}},{key:"eachOverlay",value:function(e,t){for(var n in this._cache)e.call(t,this._cache[n]);return this}},{key:"clear",value:function(){}},{key:"remove",value:function(){this._viewer&&this._viewer.removeLayer(this)}},{key:"addToViewer",value:function(e){return e&&e.addLayer&&e.addLayer(this),this}},{key:"show",set:function(e){this._show=e,this._delegate&&(this._delegate.show=this._show)},get:function(){return this._show}},{key:"layerEvent",get:function(){return this._layerEvent}},{key:"attr",set:function(e){this._attr=e},get:function(){return this._attr}},{key:"id",get:function(){return this._id}},{key:"delegate",get:function(){return this._delegate}},{key:"state",get:function(){return this._state}}])&&me(t.prototype,n),o&&me(t,o),e}();function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ce(e,t){return!t||"object"!==we(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t){return!t||"object"!==je(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ae(e,t){return(Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Me(e,t){return!t||"object"!==Le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function We(e,t){return(We=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function He(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ne(e,t){return!t||"object"!==xe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ue(e,t){return(Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}DC.CzmlLayer=function(e){function t(e,n){var o;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),!n)throw new Error("the url is empty");return(o=Ce(this,Pe(t).call(this,e)))._delegate=r.CzmlDataSource.load(n,{}),o._state=DC.LayerState.INITIALIZED,o.type=DC.LayerType.CZML,o}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}(t,e),n=t,(o=[{key:"eachOverlay",value:function(e,t){if(this._delegate)return this._delegate.then((function(n){n.entities.values.forEach((function(n){e.call(t,n)}))})),this}}])&&Ee(n.prototype,o),i&&Ee(n,i),t}(Oe),DC.KmlLayer=function(e){function t(e,n){var o;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),!n)throw new Error("the url is empty");return(o=Se(this,Te(t).call(this,e)))._delegate=r.KmlDataSource.load(n,{}),o._state=DC.LayerState.INITIALIZED,o.type=DC.LayerType.KML,o}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ae(e,t)}(t,e),n=t,(o=[{key:"eachOverlay",value:function(e,t){if(this._delegate)return this._delegate.then((function(n){n.entities.values.forEach((function(n){e.call(t,n)}))})),this}}])&&De(n.prototype,o),i&&De(n,i),t}(Oe),DC.HtmlLayer=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Me(this,Ie(t).call(this,e)))._delegate=DC.DomUtil.create("div","html-layer"),n._delegate.setAttribute("id",n._id),n._state=DC.LayerState.INITIALIZED,n.type=DC.LayerType.HTML,n._renderCallback=void 0,n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&We(e,t)}(t,e),n=t,(o=[{key:"_addCallback",value:function(e){var t=this;this._viewer=e,this._viewer.dcContainer.appendChild(this._delegate);var n=this._viewer.scene;this._renderCallback=n.postRender.addEventListener((function(){t.eachOverlay((function(e){if(e&&e.position){var t=r.SceneTransforms.wgs84ToWindowCoordinates(n,DC.T.transformWSG84ToCartesian(e.position));t&&e._updateWindowCoord(t)}}))}),this),this._state=DC.LayerState.ADDED}},{key:"_removeCallback",value:function(){this._renderCallback(),this._viewer.dcContainer.removeChild(this._delegate),this._state=DC.LayerState.REMOVED}},{key:"clear",value:function(){this._cache={};for(var e=this._delegate.childNodes,t=e.length-1;t>=0;t--)this._delegate.removeChild(e[t]);return this._state=DC.LayerState.CLEARED,this}},{key:"show",set:function(e){this._show=e,this._delegate.style.visibility=this._show?"visible":"hidden"},get:function(){return this._show}}])&&Re(n.prototype,o),i&&Re(n,i),t}(Oe);var Be=DC.getNamespace().mapv;function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ze(e,t){return!t||"object"!==ze(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fe(e,t){return(Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}DC.MapvDataSet=Be?Be.DataSet:void 0,DC.MapvLayer=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Ge(this,t),!Be)throw new Error("miss mapv lib");return(n=Ne(this,Ve(t).call(this,e)))._option=r,n._dataSet=void 0,n._delegate=void 0,n.type=DC.LayerType.MAPV,n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ue(e,t)}(t,e),n=t,(r=[{key:"_addCallback",value:function(e){this._viewer=e,this._delegate=new Be.cesiumMapLayer(this._viewer.delegate,this._dataSet||new DC.MapvDataSet([]),this._option),this._state=DC.LayerState.ADDED}},{key:"_removeCallback",value:function(){this._delegate&&this._delegate.remove(),this._state=DC.LayerState.REMOVED}},{key:"setDataSet",value:function(e){this._dataSet=e,this._delegate&&this._delegate.update({data:this._dataSet,option:this._option})}},{key:"show",set:function(e){this._show=e,this._delegate&&(this._show?this._delegate.show():this._delegate.hide())},get:function(){return this._show}}])&&He(n.prototype,r),o&&He(n,o),t}(Oe);var Je=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Ze(this,Ke(t).call(this)))._registerEvent(),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}(t,e),n=t,(o=[{key:"_registerEvent",value:function(){for(var e in DC.MouseEventType){var t=DC.MouseEventType[e];this._eventCache[t]=new r.Event}for(var n in DC.OverlayEventType){var o=DC.OverlayEventType[n];this._eventCache[o]=new r.Event}}}])&&Ye(n.prototype,o),i&&Ye(n,i),t}(ye);function qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Qe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=DC.Util.uuid(),this._layer=void 0,this._state=void 0,this._delegate=void 0,this._show=!0,this._style={},this._attr={},this._overlayEvent=new Je,this._overlayEvent.on(DC.OverlayEventType.ADD,this._addCallback,this),this._overlayEvent.on(DC.OverlayEventType.REMOVE,this._removeCallback,this),this.type=void 0}var t,n,r;return t=e,(n=[{key:"_prepareDelegate",value:function(){}},{key:"_addCallback",value:function(e){this._layer=e,this._prepareDelegate(),this._layer&&this._layer.delegate&&this._layer.delegate.entities&&(this._layer.delegate.entities.add(this._delegate),this._state=DC.OverlayState.ADDED)}},{key:"_removeCallback",value:function(){this._layer&&this._layer.delegate&&this._layer.delegate.entities&&(this._layer.delegate.entities.remove(this._delegate),this._state=DC.OverlayState.REMOVED)}},{key:"setStyle",value:function(e){}},{key:"remove",value:function(){this._layer&&this._layer.layerEvent.fire(DC.LayerEventType.REMOVE_OVERLAY,this)}},{key:"on",value:function(e,t,n){return this._overlayEvent.on(e,t,n||this),this}},{key:"off",value:function(e,t,n){return this._overlayEvent.off(e,t,n||this),this}},{key:"fire",value:function(e,t){return this._overlayEvent.fire(e,t),this}},{key:"id",get:function(){return this._id}},{key:"show",set:function(e){this._show=e,this._delegate&&(this._delegate.show=this._show)},get:function(){return this._show}},{key:"attr",set:function(e){this._attr=e},get:function(){return this._attr}},{key:"overlayEvent",get:function(){return this._overlayEvent}},{key:"delegate",get:function(){return this._delegate}},{key:"state",get:function(){return this._state}}])&&qe(t.prototype,n),r&&qe(t,r),e}();function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(n),!0).forEach((function(t){tt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rt(e,t){return!t||"object"!==Xe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ot(e){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function it(e,t){return(it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ut(e,t){return!t||"object"!==at(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ft(e){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pt(e,t){return(pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yt(e){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ht(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dt(e,t){return!t||"object"!==yt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gt(e){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mt(e,t){return(mt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ot(e){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Et(e,t){return!t||"object"!==Ot(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ct(e){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pt(e,t){return(Pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kt(e){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dt(e){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function St(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tt(e,t){return(Tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}DC.Billboard=function(e){function t(e,n){var o;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),!(e&&e instanceof DC.Position))throw new Error("the position invalid");return(o=rt(this,ot(t).call(this)))._position=e,o._icon=n,o._size=[32,32],o._delegate=new r.Entity,o._state=DC.OverlayState.INITIALIZED,o.type=DC.OverlayType.BILLBOARD,o}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&it(e,t)}(t,e),n=t,i=[{key:"fromEntity",value:function(e){var t=DC.T.transformCartesianToWSG84(e.position._value),n=void 0;return e.billboard&&((n=new DC.Billboard(t,e.billboard.image)).attr={name:e.name},n.setStyle(et({},e.billboard))),n}}],(o=[{key:"_prepareDelegate",value:function(){var e=this;this._delegate.position=new r.CallbackProperty((function(t){return DC.T.transformWSG84ToCartesian(e._position)})),this._delegate.orientation=new r.CallbackProperty((function(t){return r.Transforms.headingPitchRollQuaternion(DC.T.transformWSG84ToCartesian(e._position),new r.HeadingPitchRoll(r.Math.toRadians(e._position.heading),r.Math.toRadians(e._position.pitch),r.Math.toRadians(e._position.roll)))})),this._delegate.billboard=et({},this._style,{image:new r.CallbackProperty((function(t){return e._icon})),width:new r.CallbackProperty((function(t){return e._size[0]||32})),height:new r.CallbackProperty((function(t){return e._size[1]||32}))}),this._delegate.layer=this._layer,this._delegate.overlayId=this._id}},{key:"setLabel",value:function(e,t){return this._delegate.label=et({},t,{text:e}),this}},{key:"setStyle",value:function(e){if(0!==Object.keys(e).length)return this._style=e,this._delegate.billboard&&this._delegate.billboard.merge(this._style),this}},{key:"position",set:function(e){this._position=e},get:function(){return this._position}},{key:"icon",set:function(e){this._icon=e},get:function(){return this._icon}},{key:"size",set:function(e){this._size=e},get:function(){return this._size}}])&&nt(n.prototype,o),i&&nt(n,i),t}(Qe),DC.CustomBillboard=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ut(this,ft(t).call(this,e,n))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pt(e,t)}(t,DC.Billboard),n=t,(o=[{key:"setLine",value:function(e){var t=this;if(this._position&&this._position.alt>0&&this._delegate){if(!this._delegate.polyline){var n=new DC.Position;this._delegate.polyline={positions:new r.CallbackProperty((function(e){return n.lng=t._position.lng,n.lat=t._position.lat,n.alt=0,DC.T.transformWSG84ArrayToCartesianArray([n,t._position])}))}}this._delegate.polyline&&this._delegate.polyline.merge(e)}return this}},{key:"setCircle",value:function(e,t){return!this._delegate.ellipse&&(this._delegate.ellipse={}),this._delegate.ellipse.merge(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(Object(n),!0).forEach((function(t){lt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({semiMajorAxis:e,semiMinorAxis:e},t)),this}}])&&ct(n.prototype,o),i&&ct(n,i),t}(),DC.Polygon=function(e){function t(e){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),!e||"string"!=typeof e&&!Array.isArray(e))throw new Error("the positions invalid");return(n=dt(this,gt(t).call(this)))._positions=n._preparePositions(e),n._holes=[],n._delegate=new r.Entity,n._state=DC.OverlayState.INITIALIZED,n.type=DC.OverlayType.POLYGON,n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mt(e,t)}(t,e),n=t,i=[{key:"fromEntity",value:function(e){}}],(o=[{key:"_preparePositions",value:function(e){if("string"==typeof e){if(e.indexOf("#")>=0)throw new Error("the positions invalid");e=e.split(";")}return e.map((function(e){return Array.isArray(e)?DC.Position.fromCoordArray(e):e instanceof DC.Position?e:DC.Position.fromCoordString(e)}))}},{key:"_prepareHierarchy",value:function(){var e=new r.PolygonHierarchy;return e.positions=DC.T.transformWSG84ArrayToCartesianArray(this._positions),e.holes=this._holes.map((function(e){return new r.PolygonHierarchy(DC.T.transformWSG84ArrayToCartesianArray(e))})),e}},{key:"_prepareDelegate",value:function(){var e=this;this._delegate.polygon=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(n),!0).forEach((function(t){vt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this._style,{hierarchy:new r.CallbackProperty((function(t){return e._prepareHierarchy()}))}),this._delegate.layer=this._layer,this._delegate.overlayId=this._id}},{key:"setStyle",value:function(e){if(e&&0!==Object.keys(e).length)return this._style=e,this._delegate.polygon&&this._delegate.polygon.merge(e),this}},{key:"positions",set:function(e){this._positions=this._preparePositions(e)},get:function(){return this._positions}},{key:"holes",set:function(e){var t=this;e&&e.length&&(this._holes=e.map((function(e){return t._preparePositions(e)})))},get:function(){return this._holes}},{key:"center",get:function(){var e=r.BoundingSphere.fromPoints(DC.T.transformWSG84ArrayToCartesianArray(this._positions));return DC.T.transformCartesianToWSG84(e.center)}},{key:"area",get:function(){var e=0;if(this._positions){var t=0,n=r.Ellipsoid.WGS84,o=ht(this._positions);o.push(o[0]);for(var i=1;i<o.length;i++){var a=n.cartographicToCartesian(DC.T.transformWSG84ToCartographic(o[i-1])),s=n.cartographicToCartesian(DC.T.transformWSG84ToCartographic(o[i]));t+=a.x*s.y-s.x*a.y}e=Math.abs(t).toFixed(2)}return e}}])&&bt(n.prototype,o),i&&bt(n,i),t}(Qe),DC.CustomPolygon=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Et(this,Ct(t).call(this,e)))._topOutline=void 0,n._bottomOutline=void 0,n._topOutline=new r.Entity({polyline:{positions:n._computePolylinePositions(0)},show:!1}),n._bottomOutline=new r.Entity({polyline:{positions:n._computePolylinePositions(0)},show:!1}),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pt(e,t)}(t,DC.Polygon),n=t,(o=[{key:"_computePolylinePositions",value:function(e){var t=this._positions.slice(0);return t.push(t[0]),t.forEach((function(t){t.alt=e})),DC.T.transformWSG84ArrayToCartesianArray(t)}},{key:"_addCallback",value:function(e){this._layer=e,this._prepareDelegate(),this._layer&&this._layer.delegate&&this._layer.delegate.entities&&(this._layer.delegate.entities.add(this._delegate),this._layer.delegate.entities.add(this._topOutline),this._layer.delegate.entities.add(this._bottomOutline),this._state=DC.OverlayState.ADDED)}},{key:"_removeCallback",value:function(){this._layer&&this._layer.delegate&&this._layer.delegate.entities&&(this._layer.delegate.entities.remove(this._delegate),this._layer.delegate.entities.remove(this._topOutline),this._layer.delegate.entities.remove(this._bottomOutline),this._state=DC.OverlayState.REMOVED)}},{key:"setExtrudedHeight",value:function(e){var t=this;return arguments.length>1&&void 0!==arguments[1]&&arguments[1],this._delegate.polygon&&(this._delegate.polygon.extrudedHeight=new r.CallbackProperty((function(t){return e})),this._topOutline&&this._topOutline.show&&(this._topOutline.polyline.positions=new r.CallbackProperty((function(n){return t._computePolylinePositions(e)})))),this}},{key:"setTopOutline",value:function(e){return this._topOutline&&(this._topOutline.show=!0,this._topOutline.polyline.merge(e)),this}},{key:"setBottomOutline",value:function(e){return this._bottomOutline&&(this._bottomOutline.show=!0,this._bottomOutline.polyline.merge(e)),this}},{key:"show",set:function(e){this._show=e,this._delegate&&(this._delegate.show=e),this._topOutline&&(this._topOutline.show=e),this._bottomOutline&&(this._bottomOutline=e)},get:function(){return this._show}}])&&wt(n.prototype,o),i&&wt(n,i),t}(),DC.DivIcon=function(e){function t(e,n){var r,o,i;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),!(e&&e instanceof DC.Position))throw new Error("the position invalid");return o=this,i=Dt(t).call(this),(r=!i||"object"!==kt(i)&&"function"!=typeof i?St(o):i)._position=e,r._delegate=DC.DomUtil.create("div","div-icon"),r._delegate.setAttribute("id",r._id),r._delegate.style.position="absolute",r._delegate.style.top="0",r._delegate.style.left="0",n&&"string"==typeof n?r._delegate.innerHTML=n:n&&n instanceof Element&&r._delegate.appendChild(n),r._delegate.addEventListener("click",(function(e){r._overlayEvent.fire(DC.MouseEventType.CLICK,{layer:r._layer,overlay:St(r),position:DC.T.transformWSG84ToCartesian(r._position)})})),r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tt(e,t)}(t,e),n=t,(r=[{key:"_updateWindowCoord",value:function(e){var t=e.x-this._delegate.offsetWidth/2,n=e.y-this._delegate.offsetHeight/2;this._delegate.style.transform="translate3d(".concat(Math.round(t),"px,").concat(Math.round(n),"px, 0)")}},{key:"_addCallback",value:function(e){this._layer=e,this._layer.delegate.appendChild(this._delegate),this._state=DC.OverlayState.ADDED}},{key:"_removeCallback",value:function(){this._layer&&(this._layer.delegate.removeChild(this._delegate),this._state=DC.OverlayState.REMOVED)}},{key:"addClass",value:function(e){return DC.DomUtil.addClass(this._delegate,e),this}},{key:"show",set:function(e){this._show=e,this._delegate.style.visibility=this._show?"visible":"hidden"},get:function(){return this._show}},{key:"position",set:function(e){this._position=e},get:function(){return this._position}}])&&jt(n.prototype,r),o&&jt(n,o),t}(Qe)}]);