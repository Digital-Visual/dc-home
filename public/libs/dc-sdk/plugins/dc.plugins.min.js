!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){var r;r=!1,DC||console.error("missing dc sdk"),DC.getNamespace().mapv=window.mapv||void 0,delete window.mapv,DC.init((function(){!r&&n(6),r=!0}))},function(e,t){e.exports=" uniform sampler2D image;\n uniform float duration;\n uniform vec4 color;\n\nczm_material czm_getMaterial(czm_materialInput materialInput){\n   czm_material material = czm_getDefaultMaterial(materialInput);\n   vec2 st = materialInput.st;\n   float time = mod(czm_frameNumber, duration) / duration;\n   vec4 colorImage = texture2D(image, vec2(fract(st.s - time), st.t));\n   material.alpha = colorImage.a * color.a;\n   material.diffuse = (colorImage.rgb + color.rgb)/2.0;\n   return material;\n}\n"},function(e,t){e.exports="uniform vec4 color;\nuniform float duration;\n\nczm_material czm_getMaterial(czm_materialInput materialInput){\n    czm_material material = czm_getDefaultMaterial(materialInput);\n    vec2 st = materialInput.st;\n    float t = mod(czm_frameNumber, duration) / duration;\n    t *= 1.03;\n    float alpha = smoothstep(t- 0.03, t, st.s) * step(-t, -st.s);\n    alpha += 0.1;\n    material.diffuse = color.rgb;\n    material.alpha = alpha;\n    return material;\n}\n"},function(e,t){e.exports="uniform sampler2D colorTexture;\nuniform sampler2D depthTexture;\nvarying vec2 v_textureCoordinates;\nuniform vec4 u_scanCenterEC;\nuniform vec3 u_scanPlaneNormalEC;\nuniform float u_radius;\nuniform vec4 u_scanColor;\n\nvec4 toEye(in vec2 uv, in float depth){\n  vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));\n  vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);\n  posInCamera =posInCamera / posInCamera.w;\n  return posInCamera;\n}\n\nvec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point){\n    vec3 v01 = point - planeOrigin;\n    float d = dot(planeNormal, v01) ;\n    return (point - planeNormal * d);\n}\n\nfloat getDepth(in vec4 depth){\n    float z_window = czm_unpackDepth(depth);\n    z_window = czm_reverseLogDepth(z_window);\n    float n_range = czm_depthRange.near;\n    float f_range = czm_depthRange.far;\n    return (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n}\n\nvoid main(){\n    gl_FragColor = texture2D(colorTexture, v_textureCoordinates);\n    float depth = getDepth(texture2D(depthTexture, v_textureCoordinates));\n    vec4 viewPos = toEye(v_textureCoordinates, depth);\n    vec3 prjOnPlane = pointProjectOnPlane(u_scanPlaneNormalEC.xyz, u_scanCenterEC.xyz, viewPos.xyz);\n    float dis = length(prjOnPlane.xyz - u_scanCenterEC.xyz);\n    if(dis < u_radius){\n      float f = 1.0 - abs(u_radius - dis) / u_radius;\n      f = pow(f, 4.0);\n      gl_FragColor = mix(gl_FragColor, u_scanColor, f);\n    }\n  }\n"},function(e,t){e.exports="uniform sampler2D colorTexture;\nuniform sampler2D depthTexture;\nvarying vec2 v_textureCoordinates;\nuniform vec4 u_scanCenterEC;\nuniform vec3 u_scanPlaneNormalEC;\nuniform vec3 u_scanLineNormalEC;\nuniform float u_radius;\nuniform vec4 u_scanColor;\n\nvec4 toEye(in vec2 uv, in float depth){\n  vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));\n  vec4 posInCamera =czm_inverseProjection * vec4(xy, depth, 1.0);\n  posInCamera =posInCamera / posInCamera.w;\n  return posInCamera;\n}\n\nbool isPointOnLineRight(in vec3 ptOnLine, in vec3 lineNormal, in vec3 testPt){\n  vec3 v01 = testPt - ptOnLine;\n  normalize(v01);\n  vec3 temp = cross(v01, lineNormal);\n  float d = dot(temp, u_scanPlaneNormalEC);\n  return d > 0.5;\n}\n\nvec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point){\n  vec3 v01 = point -planeOrigin;\n  float d = dot(planeNormal, v01) ;\n  return (point - planeNormal * d);\n}\n\nfloat distancePointToLine(in vec3 ptOnLine, in vec3 lineNormal, in vec3 testPt){\n  vec3 tempPt = pointProjectOnPlane(lineNormal, ptOnLine, testPt);\n  return length(tempPt - ptOnLine);\n}\n\nfloat getDepth(in vec4 depth){\n  float z_window = czm_unpackDepth(depth);\n  z_window = czm_reverseLogDepth(z_window);\n  float n_range = czm_depthRange.near;\n  float f_range = czm_depthRange.far;\n  return (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n}\n\nvoid main(){\n  gl_FragColor = texture2D(colorTexture, v_textureCoordinates);\n  float depth = getDepth( texture2D(depthTexture, v_textureCoordinates));\n  vec4 viewPos = toEye(v_textureCoordinates, depth);\n  vec3 prjOnPlane = pointProjectOnPlane(u_scanPlaneNormalEC.xyz, u_scanCenterEC.xyz, viewPos.xyz);\n  float dis = length(prjOnPlane.xyz - u_scanCenterEC.xyz);\n  float twou_radius = u_radius * 2.0;\n  if(dis < u_radius){\n      float f0 = 1.0 -abs(u_radius - dis) / u_radius;\n      f0 = pow(f0, 64.0);\n      vec3 lineEndPt = vec3(u_scanCenterEC.xyz) + u_scanLineNormalEC * u_radius;\n      float f = 0.0;\n      if(isPointOnLineRight(u_scanCenterEC.xyz, u_scanLineNormalEC.xyz, prjOnPlane.xyz)){\n          float dis1= length(prjOnPlane.xyz - lineEndPt);\n          f = abs(twou_radius -dis1) / twou_radius;\n          f = pow(f, 3.0);\n      }\n      gl_FragColor = mix(gl_FragColor, u_scanColor, f + f0);\n    }\n}\n"},function(e,t,n){"use strict";n.r(t);var r=window.DC.getNamespace().Cesium;function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}DC.GlobeRotate=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;o(this,e),this._viewer=t,this._time=r,this._callback=i,this._startRotate();var a=setTimeout((function(){n._endRotate(),n._callback&&n._callback(),clearTimeout(a)}),1e3*Number(this._time))}var t,n,a;return t=e,(n=[{key:"_icrf",value:function(e,t){if(e.mode===r.SceneMode.SCENE3D){var n=r.Transforms.computeIcrfToFixedMatrix(t);if(r.defined(n)){var o=this._viewer.delegate.camera,i=r.Cartesian3.clone(o.position),a=r.Matrix4.fromRotationTranslation(n);o.lookAtTransform(a,i)}}}},{key:"_startRotate",value:function(){this._viewer.delegate.camera.lookAtTransform(r.Matrix4.IDENTITY),this._viewer.delegate.clock.multiplier=12e3,this._viewer.delegate.scene.postUpdate.addEventListener(this._icrf,this)}},{key:"_endRotate",value:function(){this._viewer.delegate.camera.lookAtTransform(r.Matrix4.IDENTITY),this._viewer.delegate.clock.multiplier=1,this._viewer.delegate.clock.currentTime=r.JulianDate.now().clone(),this._viewer.delegate.scene.postUpdate.removeEventListener(this._icrf,this)}}])&&i(t.prototype,n),a&&i(t,a),e}();var c={resolution:1,material:new r.PolylineGlowMaterialProperty({glowPower:.1,color:r.Color.YELLOW}),width:10};function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}DC.Roaming=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._viewer=t,this._positions=[],this._modelPath=n.modelPath,this._modelScale=n.modelScale||1,this._modelShow=n.modelShow||!0,this._time=n.time||360,this._startTime=void 0,this._endTime=void 0,this._showPath=n.showPath||!1,this._delegate=new r.Entity,this._perspective=n.perspective||0,this._parsePositions(n.positions)}var t,n,o;return t=e,(n=[{key:"_parsePositions",value:function(e){if("string"==typeof e){if(e.indexOf("#")>=0)throw new Error("the positions invalid");e=e.split(";")}this._positions=e.map((function(e){return Array.isArray(e)?DC.Position.fromCoordArray(e):e instanceof DC.Position?e:DC.Position.fromCoordString(e)}))}},{key:"_preparePositionProperty",value:function(){var e=this,t=new r.SampledPositionProperty;if(this._positions.length){var n=this._time-this._time%this._positions.length;this._startTime=r.JulianDate.now();var o=n/this._positions.length;this._endTime=r.JulianDate.addSeconds(this._startTime,n,new r.JulianDate),this._positions.forEach((function(n,i){var a=r.JulianDate.addSeconds(e._startTime,i*o,new r.JulianDate);t.addSample(a,DC.T.transformWSG84ToCartesian(n))}))}return t}},{key:"_prepareDelegate",value:function(){var e=this._preparePositionProperty();this._delegate.merge({position:e,orientation:new r.VelocityOrientationProperty(e),model:{uri:this._modelPath,scale:this._modelScale,show:this._modelShow},path:l({},c,{show:this._showPath})}),this._startTime&&this._endTime&&(this._delegate.availability=new r.TimeIntervalCollection([new r.TimeInterval({start:this._startTime,stop:this._endTime})])),this._delegate.position.setInterpolationOptions({interpolationDegree:5,interpolationAlgorithm:r.LagrangePolynomialApproximation})}},{key:"_setClock",value:function(){this._viewer.delegate.clock.startTime=this._startTime.clone(),this._viewer.delegate.clock.stopTime=this._endTime.clone(),this._viewer.delegate.clock.currentTime=this._startTime.clone(),this._viewer.delegate.clock.clockRange=r.ClockRange.UNBOUNDED}},{key:"setSpeed",value:function(e){this._viewer.delegate.clock.multiplier=e}},{key:"setPerspective",value:function(e){this._perspective=e,this._delegate.model&&(0===e?this._viewer.delegate.trackedEntity=this._delegate:1===e&&(this._viewer.delegate.trackedEntity=void 0,this._viewer.delegate.zoomTo(this._delegate,new r.HeadingPitchRange(0,r.Math.toRadians(-90)))))}},{key:"reset",value:function(){this._prepareDelegate(),this._setClock(),this._viewer.delegate.clock.multiplier=1}},{key:"start",value:function(){this._viewer.delegate.entities.remove(this._delegate),this._prepareDelegate(),this._setClock(),this._viewer.delegate.entities.add(this._delegate)}},{key:"stop",value:function(){this._viewer.delegate.entities.remove(this._delegate),this._viewer.delegate.clock.multiplier=1,this._viewer.delegate.trackedEntity=void 0}}])&&u(t.prototype,n),o&&u(t,o),e}();var p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._viewer=t.viewer,this._handler=t.handler,this._plotEvent=t.plotEvent,this._layer=t.layer,this._delegate=new r.Entity}var t,n,o;return t=e,(n=[{key:"_bindEvent",value:function(){var e=this;this._handler.setInputAction((function(t){e._mouseClickHandler&&e._mouseClickHandler(t)}),r.ScreenSpaceEventType.LEFT_CLICK),this._handler.setInputAction((function(t){e._mouseMoveHandler&&e._mouseMoveHandler(t)}),r.ScreenSpaceEventType.MOUSE_MOVE),this._handler.setInputAction((function(t){e._mouseDbClickHandler&&e._mouseDbClickHandler(t)}),r.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)}},{key:"_unbindEnvet",value:function(){this._handler.removeInputAction(r.ScreenSpaceEventType.LEFT_CLICK),this._handler.removeInputAction(r.ScreenSpaceEventType.MOUSE_MOVE),this._handler.removeInputAction(r.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)}},{key:"_prepareDelegate",value:function(){}},{key:"start",value:function(){this._bindEvent(),this._prepareDelegate()}}])&&f(t.prototype,n),o&&f(t,o),e}();function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w={pixelSize:10,outlineColor:r.Color.BLUE,outlineWidth:5},O=function(e){function t(e,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=b(this,m(t).call(this,e)))._position=r.Cartesian3.ZERO,o._style=_({},w,{},n),o}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,e),n=t,(o=[{key:"_mouseClickHandler",value:function(e){this._position=this._viewer.delegate.scene.camera.pickEllipsoid(e.position,r.Ellipsoid.WGS84),this._unbindEnvet(),this._plotEvent.raiseEvent({type:DC.OverlayType.POINT,points:[DC.T.transformCartesianToWSG84(this._position)]})}},{key:"_mouseMoveHandler",value:function(e){this._viewer.tooltip.setContent("单击选择点位"),this._position=this._viewer.delegate.scene.camera.pickEllipsoid(e.endPosition,r.Ellipsoid.WGS84),this._viewer.tooltip.setPosition(this._position)}},{key:"_prepareDelegate",value:function(){var e=this;this._delegate.position=new r.CallbackProperty((function(t){return e._position})),this._delegate.point=_({},this._style),this._layer.entities.add(this._delegate)}}])&&v(n.prototype,o),i&&v(n,i),t}(p);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T={width:3,material:r.Color.BLUE.withAlpha(.6)},x=function(e){function t(e,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=S(this,j(t).call(this,e)))._tempLine=new r.Entity,o._positions=[],o._tempPoints=[],o._style=E({},T,{},n),o}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,e),n=t,(o=[{key:"_mouseClickHandler",value:function(e){var t=this._viewer.delegate.scene.camera.pickEllipsoid(e.position,r.Ellipsoid.WGS84);t&&this._positions.push(t)}},{key:"_mouseMoveHandler",value:function(e){this._viewer.tooltip.setContent("单击选择点位,双击结束");var t=this._viewer.delegate.scene.camera.pickEllipsoid(e.endPosition,r.Ellipsoid.WGS84);this._viewer.tooltip.setPosition(t),t&&this._positions.length>0&&(this._viewer.tooltip.setPosition(t),this._tempPoints=[this._positions[this._positions.length-1],t])}},{key:"_mouseDbClickHandler",value:function(e){this._unbindEnvet(),this._positions.length>2&&(this._positions=this._positions.slice(0,-1)),this._plotEvent.raiseEvent({type:DC.OverlayType.POLYLINE,points:DC.T.transformCartesianArrayToWSG84Array(this._positions)})}},{key:"_prepareDelegate",value:function(){var e=this;this._delegate.polyline=E({positions:new r.CallbackProperty((function(t){return e._positions}))},this._style),this._tempLine.polyline=E({positions:new r.CallbackProperty((function(t){return e._tempPoints}))},this._style),this._layer.entities.add(this._delegate),this._layer.entities.add(this._tempLine)}}])&&k(n.prototype,o),i&&k(n,i),t}(p);function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var B={material:r.Color.BLUE.withAlpha(.6)},U=function(e){function t(e,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=V(this,N(t).call(this,e)))._hierarchy=new r.PolygonHierarchy,o._positions=[],o._tempPoints=[],o._style=R({},B,{},n),o}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(t,e),n=t,(o=[{key:"_mouseClickHandler",value:function(e){var t=this._viewer.delegate.scene.camera.pickEllipsoid(e.position,r.Ellipsoid.WGS84);t&&(2===this._positions.length&&(this._delegate.polyline.show=!1),this._positions.push(t),this._hierarchy.positions=this._positions)}},{key:"_mouseMoveHandler",value:function(e){this._viewer.tooltip.setContent("单击选择点位,双击结束");var t=this._viewer.delegate.scene.camera.pickEllipsoid(e.endPosition,r.Ellipsoid.WGS84);this._viewer.tooltip.setPosition(t),t&&this._positions.length>0&&(this._tempPoints=[this._positions[this._positions.length-1],t],this._hierarchy.positions=[].concat(L(this._positions),[t]))}},{key:"_mouseDbClickHandler",value:function(e){this._unbindEnvet(),this._positions.length>2&&(this._positions=this._positions.slice(0,-1)),this._plotEvent.raiseEvent({type:DC.OverlayType.POLYGON,points:DC.T.transformCartesianArrayToWSG84Array(this._positions)})}},{key:"_prepareDelegate",value:function(){var e=this;this._delegate.polygon=R({hierarchy:new r.CallbackProperty((function(t){return e._hierarchy}))},this._style),this._delegate.polyline=R({positions:new r.CallbackProperty((function(t){return e._tempPoints}))},this._style),this._layer.entities.add(this._delegate)}}])&&W(n.prototype,o),i&&W(n,i),t}(p);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var X={width:3,material:r.Color.BLUE.withAlpha(.6)},$=function(e){function t(e,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=J(this,K(t).call(this,e)))._center=r.Cartesian3.ZERO,o._radius=0,o._style=Y({},X,{},n),o}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(t,e),n=t,(o=[{key:"_mouseClickHandler",value:function(e){var t=this._viewer.delegate.scene.camera.pickEllipsoid(e.position,r.Ellipsoid.WGS84);t&&this._center===r.Cartesian3.ZERO?this._center=t:(this._computeRadius(this._center,t),this._unbindEnvet(),this._plotEvent.raiseEvent({type:DC.OverlayType.CIRCLE,points:[DC.T.transformCartesianToWSG84(this._center)],radius:this._radius}))}},{key:"_mouseMoveHandler",value:function(e){this._viewer.tooltip.setContent("单击选择点位");var t=this._viewer.delegate.scene.camera.pickEllipsoid(e.endPosition,r.Ellipsoid.WGS84);this._viewer.tooltip.setPosition(t),t&&this._center!==r.Cartesian3.ZERO&&this._computeRadius(this._center,t)}},{key:"_computeRadius",value:function(e,t){var n=r.Cartographic.fromCartesian(e),o=r.Cartographic.fromCartesian(t),i=new r.EllipsoidGeodesic;i.setEndPoints(n,o);var a=i.surfaceDistance;this._radius=Math.sqrt(Math.pow(a,2)+Math.pow(o.height-n.height,2))}},{key:"_prepareDelegate",value:function(){var e=this;this._delegate.position=new r.CallbackProperty((function(t){return e._center})),this._delegate.ellipse=Y({semiMajorAxis:new r.CallbackProperty((function(t){return e._radius})),semiMinorAxis:new r.CallbackProperty((function(t){return e._radius}))},this._style),this._delegate.point={pixelSize:10,outlineColor:r.Color.RED,outlineWidth:3},this._layer.entities.add(this._delegate)}}])&&Z(n.prototype,o),i&&Z(n,i),t}(p);function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ue={material:r.Color.BLUE.withAlpha(.6)},ce=function(e){function t(e,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=ae(this,le(t).call(this,e)))._coordinates=new r.Rectangle,o._positions=[],o._style=re({},ue,{},n),o}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(t,e),n=t,(o=[{key:"_mouseClickHandler",value:function(e){var t=this._viewer.delegate.scene.camera.pickEllipsoid(e.position,r.Ellipsoid.WGS84);t&&(this._positions.push(t),2===this._positions.length&&(this._coordinates=r.Rectangle.fromCartesianArray(this._positions,r.Ellipsoid.WGS84),this._unbindEnvet(),this._plotEvent.raiseEvent({type:DC.OverlayType.RECT,points:DC.T.transformCartesianArrayToWSG84Array(this._positions)})))}},{key:"_mouseMoveHandler",value:function(e){this._viewer.tooltip.setContent("单击选择点位");var t=this._viewer.delegate.scene.camera.pickEllipsoid(e.endPosition,r.Ellipsoid.WGS84);t&&(this._viewer.tooltip.setPosition(t),this._coordinates=r.Rectangle.fromCartesianArray([].concat(te(this._positions),[t]),r.Ellipsoid.WGS84))}},{key:"_prepareDelegate",value:function(){var e=this;this._delegate.rectangle=re({coordinates:new r.CallbackProperty((function(t){return e._coordinates}))},this._style),this._layer.entities.add(this._delegate)}}])&&ie(n.prototype,o),i&&ie(n,i),t}(p);function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}DC.Plot=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._viewer=t,this._plotEvent=new r.Event,this._handler=new r.ScreenSpaceEventHandler(this._viewer.canvas),this._callback=void 0,this._drawWorker=void 0,this._editWorker=void 0,this._layer=new r.CustomDataSource("dc-plot"),this._viewer.delegate&&this._viewer.delegate.dataSources.add(this._layer)}var t,n,o;return t=e,(n=[{key:"_completeCallback",value:function(e){this._drawWorker=void 0,this._viewer.tooltip.enable=!1,this._layer.entities.removeAll(),this._callback&&this._callback.call(this,e)}},{key:"_bindEvent",value:function(e){this._plotEvent.removeEventListener(this._completeCallback,this),this._callback=e,this._plotEvent.addEventListener(this._completeCallback,this)}},{key:"_createDrawWorker",value:function(e,t){var n={viewer:this._viewer,handler:this._handler,plotEvent:this._plotEvent,layer:this._layer};e===DC.OverlayType.POINT?this._drawWorker=new O(n,t):e===DC.OverlayType.POLYLINE?this._drawWorker=new x(n,t):e===DC.OverlayType.POLYGON?this._drawWorker=new U(n,t):e===DC.OverlayType.CIRCLE?this._drawWorker=new $(n,t):e===DC.OverlayType.RECT&&(this._drawWorker=new ce(n,t))}},{key:"_createEditWorker",value:function(e){this._viewer,this._handler,this._plotEvent,this._layer}},{key:"draw",value:function(e,t,n){this._viewer.tooltip.enable=!0,this._bindEvent(t),this._createDrawWorker(e,n),this._drawWorker.start()}},{key:"edit",value:function(e,t){this._bindEvent(callback)}}])&&fe(t.prototype,n),o&&fe(t,o),e}();var ye=n(2);function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}DC.PolylineTrailMaterialProperty=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this._definitionChanged=new r.Event,this._color=void 0,this._colorSubscription=void 0,this._duration=void 0,this._durationSubscription=void 0,this.color=r.defaultValue(t.color,r.Color.fromBytes(0,255,255,255)),this.duration=r.defaultValue(t.duration,45)}var t,n,o;return t=e,(n=[{key:"getType",value:function(e){return r.Material.PolylineTrailType}},{key:"getValue",value:function(e,t){return t||(t={}),t.color=r.Property.getValueOrClonedDefault(this._color,e,r.Color.WHITE,t.color),t.duration=this._duration,t}},{key:"equals",value:function(e){return this===e||e instanceof DC.PolylineTrailMaterialProperty&&r.Property.equals(this._color,e._color)}},{key:"isConstant",get:function(){return!1}},{key:"definitionChanged",get:function(){return this._definitionChanged}}])&&pe(t.prototype,n),o&&pe(t,o),e}(),r.defineProperties(DC.PolylineTrailMaterialProperty.prototype,{color:r.createPropertyDescriptor("color"),duration:r.createPropertyDescriptor("duration")}),r.Material.PolylineTrailType="PolylineTrail",r.Material._materialCache.addMaterial(r.Material.PolylineTrailType,{fabric:{type:r.Material.PolylineTrailType,uniforms:{color:new r.Color(1,0,0,.7),image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAAgCAYAAABkS8DlAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAADSSURBVHja7NYxEoUgDEDBYM39z2qHtZViwMFxt1FJnF/98ZXWWkRE7LWWOOt5Lsm9q/vsbu9Zdtazs/J19O5bs1XPZrwze/6V31zxbOZs1n905Wt2p3f25GzE7ohv6q3nLQCA3xEAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAEAAAAACAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAA8g4AAAD//wMA4WEFTJOT5UIAAAAASUVORK5CYII=",duration:45},source:ye},translucent:function(e){return!0}});var _e=n(3);function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}DC.PolylineFlowMaterialProperty=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this._definitionChanged=new r.Event,this._color=void 0,this._colorSubscription=void 0,this.color=r.defaultValue(t.color,r.Color.fromBytes(0,255,255,255)),this._duration=void 0,this._durationSubscription=void 0,this.duration=r.defaultValue(t.duration,45)}var t,n,o;return t=e,(n=[{key:"getType",value:function(e){return r.Material.PolylineFlowType}},{key:"getValue",value:function(e,t){return t||(t={}),t.color=r.Property.getValueOrClonedDefault(this._color,e,r.Color.WHITE,t.color),t.duration=this._duration,t}},{key:"equals",value:function(e){return this===e||e instanceof DC.PolylineFlowMaterialProperty&&r.Property.equals(this._color,e._color)}},{key:"isConstant",get:function(){return!1}},{key:"definitionChanged",get:function(){return this._definitionChanged}}])&&he(t.prototype,n),o&&he(t,o),e}(),r.defineProperties(DC.PolylineFlowMaterialProperty.prototype,{color:r.createPropertyDescriptor("color"),duration:r.createPropertyDescriptor("duration")}),r.Material.PolylineFlowType="PolylineFlow",r.Material._materialCache.addMaterial(r.Material.PolylineFlowType,{fabric:{type:r.Material.PolylineFlowType,uniforms:{color:new r.Color(1,0,0,.7),duration:45},source:_e},translucent:function(e){return!0}}),DC.WaterMaterialProperty=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this._definitionChanged=new r.Event,this._baseWaterColor=void 0,this._baseWaterColorSubscription=void 0,this.baseWaterColor=r.defaultValue(t.baseWaterColor,new r.Color(.2,.3,.6,1)),this._blendColor=void 0,this._blendColorSubscription=void 0,this.blendColor=r.defaultValue(t.blendColor,new r.Color(0,1,.699,1)),this._specularMap=void 0,this._specularMapSubscription=void 0,this.specularMap=r.defaultValue(t.specularMap,r.Material.DefaultImageId),this._normalMap=void 0,this._normalMapSubscription=void 0,this.normalMap=r.defaultValue(t.normalMap,r.Material.DefaultImageId),this.frequency=r.defaultValue(t.frequency,10),this.animationSpeed=r.defaultValue(t.animationSpeed,.01),this.amplitude=r.defaultValue(t.amplitude,1),this.specularIntensity=r.defaultValue(t.specularIntensity,.5),this.fadeFactor=r.defaultValue(t.fadeFactor,1)}var t,n,o;return t=e,(n=[{key:"getType",value:function(e){return r.Material.WaterType}},{key:"getValue",value:function(e,t){return t||(t={}),t.baseWaterColor=r.Property.getValueOrUndefined(this._baseWaterColor,e),t.blendColor=r.Property.getValueOrUndefined(this._blendColor,e),t.specularMap=r.Property.getValueOrUndefined(this._specularMap,e),t.normalMap=r.Property.getValueOrUndefined(this._normalMap,e),t.frequency=this.frequency,t.animationSpeed=this.animationSpeed,t.amplitude=this.amplitude,t.specularIntensity=this.specularIntensity,t.fadeFactor=this.fadeFactor,t}},{key:"equals",value:function(e){return this===e||e instanceof DC.WaterMaterialProperty&&r.Property.equals(this._baseWaterColor,e._baseWaterColor)}},{key:"isConstant",get:function(){return!1}},{key:"definitionChanged",get:function(){return this._definitionChanged}}])&&de(t.prototype,n),o&&de(t,o),e}(),r.defineProperties(DC.WaterMaterialProperty.prototype,{baseWaterColor:r.createPropertyDescriptor("baseWaterColor"),normalMap:r.createPropertyDescriptor("normalMap")}),DC.RimLightingMaterialProperty=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this._definitionChanged=new r.Event,this._color=void 0,this._colorSubscription=void 0,this.color=r.defaultValue(t.color,new r.Color(1,0,0,.7)),this._rimColor=void 0,this._rimColorSubscription=void 0,this.rimColor=r.defaultValue(t.rimColor,new r.Color(1,1,1,.4)),this._width=void 0,this._widthSubscription=void 0,this.width=r.defaultValue(t.width,.3)}var t,n,o;return t=e,(n=[{key:"getType",value:function(e){return r.Material.RimLightingType}},{key:"getValue",value:function(e,t){return t||(t={}),t.color=r.Property.getValueOrUndefined(this._color,e),t.rimColor=r.Property.getValueOrUndefined(this._rimColor,e),t.width=r.Property.getValueOrUndefined(this._width,e),t}},{key:"equals",value:function(e){return this===e||e instanceof DC.RimLightingMaterialProperty&&r.Property.equals(this._color,e._color)}},{key:"isConstant",get:function(){return!1}},{key:"definitionChanged",get:function(){return this._definitionChanged}}])&&ve(t.prototype,n),o&&ve(t,o),e}(),r.defineProperties(DC.RimLightingMaterialProperty.prototype,{color:r.createPropertyDescriptor("color"),rimColor:r.createPropertyDescriptor("rimColor"),width:r.createPropertyDescriptor("width")});var me=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventCache={}}var t,n,r;return t=e,(n=[{key:"_registerEvent",value:function(){}},{key:"_on",value:function(e,t,n){var r=this._eventCache[e]||void 0;t&&r&&r.addEventListener(t,n||this)}},{key:"_off",value:function(e,t,n){var r=this._eventCache[e]||void 0;r&&t&&r.removeEventListener(t,n||this)}},{key:"_fire",value:function(e,t){var n=this._eventCache[e];n&&n.raiseEvent(t)}},{key:"on",value:function(e,t,n){return this._on(e,t,n),this}},{key:"off",value:function(e,t,n){return this._off(e,t,n),this}},{key:"fire",value:function(e,t){return this._fire(e,t),this}},{key:"getEvent",value:function(e){return this._eventCache[e]||void 0}}])&&be(t.prototype,n),r&&be(t,r),e}();function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oe(e,t){return!t||"object"!==ge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ee=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Oe(this,Ce(t).call(this)))._registerEvent(),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(t,e),n=t,(o=[{key:"_registerEvent",value:function(){for(var e in DC.EffectEventType){var t=DC.EffectEventType[e];this._eventCache[t]=new r.Event}}}])&&we(n.prototype,o),i&&we(n,i),t}(me);function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ke=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=t||DC.Util.uuid(),this._viewer=void 0,this._effectEvent=new Ee,this._delegate=void 0,this.type=void 0,this.on(DC.EffectEventType.ADD,this._addCallback,this),this.on(DC.EffectEventType.REMOVE,this._removeCallback,this)}var t,n,r;return t=e,(n=[{key:"_prepareDelegate",value:function(){}},{key:"_addCallback",value:function(e){}},{key:"_removeCallback",value:function(){}},{key:"addToViewer",value:function(e){return e.addEffect(this),this}},{key:"on",value:function(e,t,n){return this._effectEvent.on(e,t,n||this),this}},{key:"off",value:function(e,t,n){return this._effectEvent.off(e,t,n||this),this}},{key:"fire",value:function(e,t){return this._effectEvent.fire(e,t),this}},{key:"id",get:function(){return this._id}},{key:"effectEvent",get:function(){return this._effectEvent}}])&&De(t.prototype,n),r&&De(t,r),e}();function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ae(e,t){return!t||"object"!==Se(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ie(e,t){return!t||"object"!==Me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}DC.BloomEffect=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ae(this,Te(t).call(this,e)))._contrast=128,n._brightness=-.3,n._glowOnly=!1,n._delta=1,n._sigma=2,n._stepSize=1,n._state=DC.EffectState.INITIALIZED,n.type=DC.EffectType.BLOOM,n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(t,e),n=t,(r=[{key:"_prepareDelegate",value:function(){this._delegate=this._viewer.delegate.scene.postProcessStages.bloom,this._delegate.uniforms.contrast=this._contrast,this._delegate.uniforms.brightness=this._brightness,this._delegate.uniforms.glowOnly=this._glowOnly,this._delegate.uniforms.delta=this._delta,this._delegate.uniforms.sigma=this._sigma,this._delegate.uniforms.stepSize=this._stepSize}},{key:"_addCallback",value:function(e){this._viewer=e,this._prepareDelegate(),this._delegate&&(this._delegate.enabled=!0),this._state=DC.EffectState.ADDED}},{key:"_removeCallback",value:function(){this._delegate&&(this._delegate.enabled=!1,this.delegate=void 0),this._state=DC.EffectState.REMOVED}},{key:"contrast",set:function(e){this._contrast=e,this._delegate&&(this._delegate.uniforms.contrast=this._contrast)}},{key:"brightness",set:function(e){this._brightness=e,this._delegate&&(this._delegate.uniforms.brightness=this._brightness)}},{key:"glowOnly",set:function(e){this._glowOnly=e,this._delegate&&(this._delegate.uniforms.glowOnly=this._glowOnly)}},{key:"delta",set:function(e){this._delta=e,this._delegate&&(this._delegate.uniforms.delta=this._delta)}},{key:"sigma",set:function(e){this._sigma=e,this._delegate&&(this._delegate.uniforms.sigma=this._sigma)}},{key:"stepSize",set:function(e){this._stepSize=e,this._delegate&&(this._delegate.uniforms.stepSize=this._stepSize)}}])&&je(n.prototype,r),o&&je(n,o),t}(ke);var We=n(4);function Ve(e){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ge(e,t){return!t||"object"!==Ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ue(e,t){return(Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}DC.CircleScanEffect=function(e){function t(e,n,o,i,a){var l;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),!(n&&n instanceof DC.Position))throw new Error("the position invalid");return(l=Ie(this,Re(t).call(this,e)))._position=n,l._radius=o||0,l._color=r.defaultValue(i,r.Color.RED),l._duration=r.defaultValue(a,1e3),l.type=DC.EffectType.CIRCLE_SCAN,l}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(t,e),n=t,(o=[{key:"_prepareDelegate",value:function(){var e=this,t=DC.T.transformWSG84ToCartesian(this._position),n=new r.Cartesian4(t.x,t.y,t.z,1),o=DC.T.transformWSG84ToCartesian(new DC.Position(this._position.lng,this._position.lat,this._position.alt+500)),i=new r.Cartesian4(o.x,o.y,o.z,1),a=(new Date).getTime();this._delegate=new r.PostProcessStage({name:this._id,fragmentShader:We,uniforms:{u_scanCenterEC:function(){return r.Matrix4.multiplyByVector(e._viewer.delegate.camera._viewMatrix,n,new r.Cartesian4)},u_scanPlaneNormalEC:function(){var t=r.Matrix4.multiplyByVector(e._viewer.delegate.camera._viewMatrix,n,new r.Cartesian4),o=r.Matrix4.multiplyByVector(e._viewer.delegate.camera._viewMatrix,i,new r.Cartesian4),a=new r.Cartesian3;return a.x=o.x-t.x,a.y=o.y-t.y,a.z=o.z-t.z,r.Cartesian3.normalize(a,a),a},u_radius:function(){return e._radius*(((new Date).getTime()-a)%e._duration)/e._duration},u_scanColor:this._color}})}},{key:"_addCallback",value:function(e){this._viewer=e,this._prepareDelegate(),this._delegate&&this._viewer.delegate.scene.postProcessStages.add(this._delegate),this._state=DC.EffectState.ADDED}},{key:"_removeCallback",value:function(){this._viewer,this._delegate&&this._viewer.delegate.scene.postProcessStages.remove(this._delegate),this._state=DC.EffectState.REMOVED}}])&&Le(n.prototype,o),i&&Le(n,i),t}(ke);var He=n(5);function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qe(e,t){return!t||"object"!==Fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ze(e){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Je(e,t){return(Je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}DC.RadarScanEffect=function(e){function t(e,n,o,i,a){var l;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),!(n&&n instanceof DC.Position))throw new Error("the position invalid");return(l=Ge(this,Be(t).call(this,e)))._position=n,l._radius=o||0,l._color=r.defaultValue(i,r.Color.RED),l._duration=r.defaultValue(a,1e3),l.type=DC.EffectType.RADAR_SCAN,l}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ue(e,t)}(t,e),n=t,(o=[{key:"_prepareDelegate",value:function(){var e=this,t=DC.T.transformWSG84ToCartesian(this._position),n=new r.Cartesian4(t.x,t.y,t.z,1),o=DC.T.transformWSG84ToCartesian(new DC.Position(this._position.lng,this._position.lat,this._position.alt+500)),i=new r.Cartesian4(o.x,o.y,o.z,1),a=DC.T.transformWSG84ToCartesian(new DC.Position(this._position.lng+.001,this._position.lat,this._position.alt)),l=new r.Cartesian4(a.x,a.y,a.z,1),s=(new Date).getTime(),u=new r.Quaternion,c=new r.Matrix3,f=new r.Cartesian4,p=new r.Cartesian4,y=new r.Cartesian4,h=new r.Cartesian3,_=new r.Cartesian3;this._delegate=new r.PostProcessStage({name:this._id,fragmentShader:He,uniforms:{u_scanCenterEC:function(){return r.Matrix4.multiplyByVector(e._viewer.delegate.camera._viewMatrix,n,f)},u_scanPlaneNormalEC:function(){var t=r.Matrix4.multiplyByVector(e._viewer.delegate.camera._viewMatrix,n,f),o=r.Matrix4.multiplyByVector(e._viewer.delegate.camera._viewMatrix,i,p);return h.x=o.x-t.x,h.y=o.y-t.y,h.z=o.z-t.z,r.Cartesian3.normalize(h,h),h},u_scanLineNormalEC:function(){var t=r.Matrix4.multiplyByVector(e._viewer.delegate.camera._viewMatrix,n,f),o=r.Matrix4.multiplyByVector(e._viewer.delegate.camera._viewMatrix,i,p),a=r.Matrix4.multiplyByVector(viewer.camera._viewMatrix,l,y);h.x=o.x-t.x,h.y=o.y-t.y,h.z=o.z-t.z,r.Cartesian3.normalize(h,h),_.x=a.x-t.x,_.y=a.y-t.y,_.z=a.z-t.z;var d=((new Date).getTime()-s)%e._duration/e._duration;return r.Quaternion.fromAxisAngle(h,d*r.Math.PI*2,u),r.Matrix3.fromQuaternion(u,c),r.Matrix3.multiplyByVector(c,_,_),r.Cartesian3.normalize(_,_),_},u_radius:this._radius,u_scanColor:this._color}})}},{key:"_addCallback",value:function(e){this._viewer=e,this._prepareDelegate(),this._delegate&&this._viewer.delegate.scene.postProcessStages.add(this._delegate),this._state=DC.EffectState.ADDED}},{key:"_removeCallback",value:function(){this._viewer,this._delegate&&this._viewer.delegate.scene.postProcessStages.remove(this._delegate),this._state=DC.EffectState.REMOVED}}])&&Ne(n.prototype,o),i&&Ne(n,i),t}(ke);var Ke=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=qe(this,Ze(t).call(this)))._registerEvent(),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Je(e,t)}(t,e),n=t,(o=[{key:"_registerEvent",value:function(){for(var e in DC.LayerEventType){var t=DC.LayerEventType[e];this._eventCache[t]=new r.Event}}}])&&Ye(n.prototype,o),i&&Ye(n,i),t}(me);function Qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Xe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=t||DC.Util.uuid(),this._delegate=void 0,this._viewer=void 0,this._state=void 0,this._show=!0,this._cache={},this._attr={},this._layerEvent=new Ke,this._layerEvent.on(DC.LayerEventType.ADD,this._addCallback,this),this._layerEvent.on(DC.LayerEventType.REMOVE,this._removeCallback,this),this._layerEvent.on(DC.LayerEventType.ADD_OVERLAY,this._addOverlayCallback,this),this._layerEvent.on(DC.LayerEventType.REMOVE_OVERLAY,this._removeOverlayCallback,this),this.type=void 0}var t,n,o;return t=e,(n=[{key:"_addCallback",value:function(e){this._viewer=e,this._delegate&&(this._delegate instanceof r.PrimitiveCollection?this._viewer.delegate.scene.primitives.add(this._delegate):this._viewer.delegate.dataSources.add(this._delegate),this._state=DC.LayerState.ADDED)}},{key:"_removeCallback",value:function(){this._delegate&&this._viewer&&(this._cache={},this._delegate instanceof r.PrimitiveCollection?(this._delegate.removeAll(),this._viewer.delegate.scene.primitives.remove(this._delegate)):(this._delegate.entities.removeAll(),this._viewer.delegate.dataSources.remove(this._delegate)),this._state=DC.LayerState.REMOVED)}},{key:"_addOverlayCallback",value:function(e){e&&e.overlayEvent&&e.state!==DC.OverlayState.ADDED&&(e.overlayEvent.fire(DC.OverlayEventType.ADD,this),this._cache[e.id]=e)}},{key:"_removeOverlayCallback",value:function(e){e&&e.overlayEvent&&e.state!==DC.OverlayState.REMOVED&&(e.overlayEvent.fire(DC.OverlayEventType.REMOVE,this),delete this._cache[e.id])}},{key:"addOverlay",value:function(e){return this._addOverlayCallback(e),this}},{key:"removeOverlay",value:function(e){return this._removeOverlayCallback(e),this}},{key:"getOverlay",value:function(e){return this._cache[e]||void 0}},{key:"getOverlayByAttr",value:function(e,t){var n=void 0;for(var r in this._cache)this._cache[r].attr[e]===t&&(n=this._cache[r]);return n}},{key:"eachOverlay",value:function(e,t){for(var n in this._cache)e.call(t,this._cache[n]);return this}},{key:"clear",value:function(){}},{key:"remove",value:function(){this._viewer&&this._viewer.removeLayer(this)}},{key:"addToViewer",value:function(e){return e&&e.addLayer&&e.addLayer(this),this}},{key:"show",set:function(e){this._show=e,this._delegate&&(this._delegate.show=this._show)},get:function(){return this._show}},{key:"layerEvent",get:function(){return this._layerEvent}},{key:"attr",set:function(e){this._attr=e},get:function(){return this._attr}},{key:"id",get:function(){return this._id}},{key:"delegate",get:function(){return this._delegate}},{key:"state",get:function(){return this._state}}])&&Qe(t.prototype,n),o&&Qe(t,o),e}();function $e(e){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tt(e,t){return!t||"object"!==$e(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nt(e){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rt(e,t){return(rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ot(e){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function it(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function at(e,t){return!t||"object"!==ot(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lt(e){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function st(e,t){return(st=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ut(e){return(ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ft(e,t){return!t||"object"!==ut(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pt(e){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yt(e,t){return(yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ht(e){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vt(e,t){return!t||"object"!==ht(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bt(e){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mt(e,t){return(mt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}DC.CzmlLayer=function(e){function t(e,n){var o;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),!n)throw new Error("the url is empty");return(o=tt(this,nt(t).call(this,e)))._delegate=r.CzmlDataSource.load(n,{}),o._state=DC.LayerState.INITIALIZED,o.type=DC.LayerType.CZML,o}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rt(e,t)}(t,e),n=t,(o=[{key:"eachOverlay",value:function(e,t){if(this._delegate)return this._delegate.then((function(n){n.entities.values.forEach((function(n){e.call(t,n)}))})),this}}])&&et(n.prototype,o),i&&et(n,i),t}(Xe),DC.KmlLayer=function(e){function t(e,n){var o;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),!n)throw new Error("the url is empty");return(o=at(this,lt(t).call(this,e)))._delegate=r.KmlDataSource.load(n,{}),o._state=DC.LayerState.INITIALIZED,o.type=DC.LayerType.KML,o}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&st(e,t)}(t,e),n=t,(o=[{key:"eachOverlay",value:function(e,t){if(this._delegate)return this._delegate.then((function(n){n.entities.values.forEach((function(n){e.call(t,n)}))})),this}}])&&it(n.prototype,o),i&&it(n,i),t}(Xe),DC.HtmlLayer=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ft(this,pt(t).call(this,e)))._delegate=DC.DomUtil.create("div","html-layer"),n._delegate.setAttribute("id",n._id),n._state=DC.LayerState.INITIALIZED,n.type=DC.LayerType.HTML,n._renderCallback=void 0,n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yt(e,t)}(t,e),n=t,(o=[{key:"_addCallback",value:function(e){var t=this;this._viewer=e,this._viewer.dcContainer.appendChild(this._delegate);var n=this._viewer.scene;this._renderCallback=n.postRender.addEventListener((function(){t.eachOverlay((function(e){if(e&&e.position){var t=r.SceneTransforms.wgs84ToWindowCoordinates(n,DC.T.transformWSG84ToCartesian(e.position));t&&e._updateWindowCoord(t)}}))}),this),this._state=DC.LayerState.ADDED}},{key:"_removeCallback",value:function(){this._renderCallback(),this._viewer.dcContainer.removeChild(this._delegate),this._state=DC.LayerState.REMOVED}},{key:"clear",value:function(){this._cache={};for(var e=this._delegate.childNodes,t=e.length-1;t>=0;t--)this._delegate.removeChild(e[t]);return this._state=DC.LayerState.CLEARED,this}},{key:"show",set:function(e){this._show=e,this._delegate.style.visibility=this._show?"visible":"hidden"},get:function(){return this._show}}])&&ct(n.prototype,o),i&&ct(n,i),t}(Xe);var gt=DC.getNamespace().mapv;function wt(e){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ct(e,t){return!t||"object"!==wt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pt(e){return(Pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Et(e,t){return(Et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}DC.MapvDataSet=gt?gt.DataSet:void 0,DC.MapvLayer=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_t(this,t),!gt)throw new Error("miss mapv lib");return(n=vt(this,bt(t).call(this,e)))._option=r,n._dataSet=void 0,n._delegate=void 0,n.type=DC.LayerType.MAPV,n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mt(e,t)}(t,e),n=t,(r=[{key:"_addCallback",value:function(e){this._viewer=e,this._delegate=new gt.cesiumMapLayer(this._viewer.delegate,this._dataSet||new DC.MapvDataSet([]),this._option),this._state=DC.LayerState.ADDED}},{key:"_removeCallback",value:function(){this._delegate&&this._delegate.remove(),this._state=DC.LayerState.REMOVED}},{key:"setDataSet",value:function(e){this._dataSet=e,this._delegate&&this._delegate.update({data:this._dataSet,option:this._option})}},{key:"show",set:function(e){this._show=e,this._delegate&&(this._show?this._delegate.show():this._delegate.hide())},get:function(){return this._show}}])&&dt(n.prototype,r),o&&dt(n,o),t}(Xe);var Dt=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Ct(this,Pt(t).call(this)))._registerEvent(),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Et(e,t)}(t,e),n=t,(o=[{key:"_registerEvent",value:function(){for(var e in DC.MouseEventType){var t=DC.MouseEventType[e];this._eventCache[t]=new r.Event}for(var n in DC.OverlayEventType){var o=DC.OverlayEventType[n];this._eventCache[o]=new r.Event}}}])&&Ot(n.prototype,o),i&&Ot(n,i),t}(me);function kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var St=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=DC.Util.uuid(),this._layer=void 0,this._state=void 0,this._delegate=void 0,this._show=!0,this._style={},this._attr={},this._overlayEvent=new Dt,this.type=void 0,this.on(DC.OverlayEventType.ADD,this._addCallback,this),this.on(DC.OverlayEventType.REMOVE,this._removeCallback,this)}var t,n,r;return t=e,(n=[{key:"_prepareDelegate",value:function(){}},{key:"_addCallback",value:function(e){this._layer=e,this._prepareDelegate(),this._layer&&this._layer.delegate&&this._layer.delegate.entities&&(this._layer.delegate.entities.add(this._delegate),this._state=DC.OverlayState.ADDED)}},{key:"_removeCallback",value:function(){this._layer&&this._layer.delegate&&this._layer.delegate.entities&&(this._layer.delegate.entities.remove(this._delegate),this._state=DC.OverlayState.REMOVED)}},{key:"setStyle",value:function(e){}},{key:"remove",value:function(){this._layer&&this._layer.layerEvent.fire(DC.LayerEventType.REMOVE_OVERLAY,this)}},{key:"on",value:function(e,t,n){return this._overlayEvent.on(e,t,n||this),this}},{key:"off",value:function(e,t,n){return this._overlayEvent.off(e,t,n||this),this}},{key:"fire",value:function(e,t){return this._overlayEvent.fire(e,t),this}},{key:"id",get:function(){return this._id}},{key:"show",set:function(e){this._show=e,this._delegate&&(this._delegate.show=this._show)},get:function(){return this._show}},{key:"attr",set:function(e){this._attr=e},get:function(){return this._attr}},{key:"overlayEvent",get:function(){return this._overlayEvent}},{key:"delegate",get:function(){return this._delegate}},{key:"state",get:function(){return this._state}}])&&kt(t.prototype,n),r&&kt(t,r),e}();function jt(e){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function At(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?At(Object(n),!0).forEach((function(t){xt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):At(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lt(e,t){return!t||"object"!==jt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function It(e){return(It=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rt(e,t){return(Rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zt(e){return(zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gt(e,t){return!t||"object"!==zt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bt(e){return(Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ut(e,t){return(Ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ht(e){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ft(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jt(e,t){return!t||"object"!==Ht(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kt(e){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qt(e,t){return(Qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xt(e){return(Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function en(e,t){return!t||"object"!==Xt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tn(e){return(tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nn(e,t){return(nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rn(e){return(rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function on(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function an(e){return(an=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ln(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sn(e,t){return(sn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}DC.Billboard=function(e){function t(e,n){var o;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),!(e&&e instanceof DC.Position))throw new Error("the position invalid");return(o=Lt(this,It(t).call(this)))._position=e,o._icon=n,o._size=[32,32],o._delegate=new r.Entity,o._state=DC.OverlayState.INITIALIZED,o.type=DC.OverlayType.BILLBOARD,o}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rt(e,t)}(t,e),n=t,i=[{key:"fromEntity",value:function(e){var t=DC.T.transformCartesianToWSG84(e.position._value),n=void 0;return e.billboard&&((n=new DC.Billboard(t,e.billboard.image)).attr={name:e.name},n.setStyle(Tt({},e.billboard))),n}}],(o=[{key:"_prepareDelegate",value:function(){var e=this;this._delegate.position=new r.CallbackProperty((function(t){return DC.T.transformWSG84ToCartesian(e._position)})),this._delegate.orientation=new r.CallbackProperty((function(t){return r.Transforms.headingPitchRollQuaternion(DC.T.transformWSG84ToCartesian(e._position),new r.HeadingPitchRoll(r.Math.toRadians(e._position.heading),r.Math.toRadians(e._position.pitch),r.Math.toRadians(e._position.roll)))})),this._delegate.billboard=Tt({},this._style,{image:new r.CallbackProperty((function(t){return e._icon})),width:new r.CallbackProperty((function(t){return e._size[0]||32})),height:new r.CallbackProperty((function(t){return e._size[1]||32}))}),this._delegate.layer=this._layer,this._delegate.overlayId=this._id}},{key:"setLabel",value:function(e,t){return this._delegate.label=Tt({},t,{text:e}),this}},{key:"setStyle",value:function(e){if(0!==Object.keys(e).length)return this._style=e,this._delegate.billboard&&DC.Util.merge(this._delegate.billboard,this._style),this}},{key:"position",set:function(e){this._position=e},get:function(){return this._position}},{key:"icon",set:function(e){this._icon=e},get:function(){return this._icon}},{key:"size",set:function(e){this._size=e},get:function(){return this._size}}])&&Mt(n.prototype,o),i&&Mt(n,i),t}(St),DC.CustomBillboard=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Gt(this,Bt(t).call(this,e,n))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ut(e,t)}(t,DC.Billboard),n=t,(o=[{key:"setLine",value:function(e){var t=this;if(this._position&&this._position.alt>0&&this._delegate){if(!this._delegate.polyline){var n=new DC.Position;this._delegate.polyline={positions:new r.CallbackProperty((function(e){return n.lng=t._position.lng,n.lat=t._position.lat,n.alt=0,DC.T.transformWSG84ArrayToCartesianArray([n,t._position])}))}}this._delegate.polyline&&this._delegate.polyline.merge(e)}return this}},{key:"setCircle",value:function(e,t){return!this._delegate.ellipse&&(this._delegate.ellipse={}),this._delegate.ellipse.merge(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(n),!0).forEach((function(t){Vt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({semiMajorAxis:e,semiMinorAxis:e},t)),this}}])&&Nt(n.prototype,o),i&&Nt(n,i),t}(),DC.Polygon=function(e){function t(e){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),!e||"string"!=typeof e&&!Array.isArray(e))throw new Error("the positions invalid");return(n=Jt(this,Kt(t).call(this)))._positions=n._preparePositions(e),n._holes=[],n._delegate=new r.Entity,n._state=DC.OverlayState.INITIALIZED,n.type=DC.OverlayType.POLYGON,n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qt(e,t)}(t,e),n=t,i=[{key:"fromEntity",value:function(e){}}],(o=[{key:"_preparePositions",value:function(e){if("string"==typeof e){if(e.indexOf("#")>=0)throw new Error("the positions invalid");e=e.split(";")}return e.map((function(e){return Array.isArray(e)?DC.Position.fromCoordArray(e):e instanceof DC.Position?e:DC.Position.fromCoordString(e)}))}},{key:"_prepareHierarchy",value:function(){var e=new r.PolygonHierarchy;return e.positions=DC.T.transformWSG84ArrayToCartesianArray(this._positions),e.holes=this._holes.map((function(e){return new r.PolygonHierarchy(DC.T.transformWSG84ArrayToCartesianArray(e))})),e}},{key:"_prepareDelegate",value:function(){var e=this;this._delegate.polygon=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yt(Object(n),!0).forEach((function(t){qt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this._style,{hierarchy:new r.CallbackProperty((function(t){return e._prepareHierarchy()}))}),this._delegate.layer=this._layer,this._delegate.overlayId=this._id}},{key:"setStyle",value:function(e){if(e&&0!==Object.keys(e).length)return this._style=e,this._delegate.polygon&&DC.Util.merge(this._delegate.polygon,this._style),this}},{key:"positions",set:function(e){this._positions=this._preparePositions(e)},get:function(){return this._positions}},{key:"holes",set:function(e){var t=this;e&&e.length&&(this._holes=e.map((function(e){return t._preparePositions(e)})))},get:function(){return this._holes}},{key:"center",get:function(){var e=r.BoundingSphere.fromPoints(DC.T.transformWSG84ArrayToCartesianArray(this._positions));return DC.T.transformCartesianToWSG84(e.center)}},{key:"area",get:function(){var e=0;if(this._positions){var t=0,n=r.Ellipsoid.WGS84,o=Ft(this._positions);o.push(o[0]);for(var i=1;i<o.length;i++){var a=n.cartographicToCartesian(DC.T.transformWSG84ToCartographic(o[i-1])),l=n.cartographicToCartesian(DC.T.transformWSG84ToCartographic(o[i]));t+=a.x*l.y-l.x*a.y}e=Math.abs(t).toFixed(2)}return e}}])&&Zt(n.prototype,o),i&&Zt(n,i),t}(St),DC.CustomPolygon=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=en(this,tn(t).call(this,e)))._topOutline=void 0,n._bottomOutline=void 0,n._topOutline=new r.Entity({polyline:{positions:n._computePolylinePositions(0)},show:!1}),n._bottomOutline=new r.Entity({polyline:{positions:n._computePolylinePositions(0)},show:!1}),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nn(e,t)}(t,DC.Polygon),n=t,(o=[{key:"_computePolylinePositions",value:function(e){var t=this._positions.slice(0);return t.push(t[0]),t.forEach((function(t){t.alt=e})),DC.T.transformWSG84ArrayToCartesianArray(t)}},{key:"_addCallback",value:function(e){this._layer=e,this._prepareDelegate(),this._layer&&this._layer.delegate&&this._layer.delegate.entities&&(this._layer.delegate.entities.add(this._delegate),this._layer.delegate.entities.add(this._topOutline),this._layer.delegate.entities.add(this._bottomOutline),this._state=DC.OverlayState.ADDED)}},{key:"_removeCallback",value:function(){this._layer&&this._layer.delegate&&this._layer.delegate.entities&&(this._layer.delegate.entities.remove(this._delegate),this._layer.delegate.entities.remove(this._topOutline),this._layer.delegate.entities.remove(this._bottomOutline),this._state=DC.OverlayState.REMOVED)}},{key:"setExtrudedHeight",value:function(e){var t=this;return arguments.length>1&&void 0!==arguments[1]&&arguments[1],this._delegate.polygon&&(this._delegate.polygon.extrudedHeight=new r.CallbackProperty((function(t){return e})),this._topOutline&&this._topOutline.show&&(this._topOutline.polyline.positions=new r.CallbackProperty((function(n){return t._computePolylinePositions(e)})))),this}},{key:"setTopOutline",value:function(e){if(this._topOutline){if(this._topOutline.show=r.defaultValue(e.show,!0),delete e.show,!e||0===Object.keys(e).length)return this;DC.Util.merge(this._topOutline.polyline,e)}return this}},{key:"setBottomOutline",value:function(e){if(this._bottomOutline){if(this._bottomOutline.show=r.defaultValue(e.show,!0),delete e.show,!e||0===Object.keys(e).length)return this;DC.Util.merge(this._bottomOutline.polyline,e)}return this}},{key:"show",set:function(e){this._show=e,this._delegate&&(this._delegate.show=e),this._topOutline&&(this._topOutline.show=e),this._bottomOutline&&(this._bottomOutline.show=e)},get:function(){return this._show}}])&&$t(n.prototype,o),i&&$t(n,i),t}(),DC.DivIcon=function(e){function t(e,n){var r,o,i;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),!(e&&e instanceof DC.Position))throw new Error("the position invalid");return o=this,i=an(t).call(this),(r=!i||"object"!==rn(i)&&"function"!=typeof i?ln(o):i)._position=e,r._delegate=DC.DomUtil.create("div","div-icon"),r._delegate.setAttribute("id",r._id),r._delegate.style.position="absolute",r._delegate.style.top="0",r._delegate.style.left="0",n&&"string"==typeof n?r._delegate.innerHTML=n:n&&n instanceof Element&&r._delegate.appendChild(n),r._delegate.addEventListener("click",(function(e){r._overlayEvent.fire(DC.MouseEventType.CLICK,{layer:r._layer,overlay:ln(r),position:DC.T.transformWSG84ToCartesian(r._position)})})),r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sn(e,t)}(t,e),n=t,(r=[{key:"_updateWindowCoord",value:function(e){var t=e.x-this._delegate.offsetWidth/2,n=e.y-this._delegate.offsetHeight/2;this._delegate.style.transform="translate3d(".concat(Math.round(t),"px,").concat(Math.round(n),"px, 0)")}},{key:"_addCallback",value:function(e){this._layer=e,this._layer.delegate.appendChild(this._delegate),this._state=DC.OverlayState.ADDED}},{key:"_removeCallback",value:function(){this._layer&&(this._layer.delegate.removeChild(this._delegate),this._state=DC.OverlayState.REMOVED)}},{key:"addClass",value:function(e){return DC.DomUtil.addClass(this._delegate,e),this}},{key:"show",set:function(e){this._show=e,this._delegate.style.visibility=this._show?"visible":"hidden"},get:function(){return this._show}},{key:"position",set:function(e){this._position=e},get:function(){return this._position}}])&&on(n.prototype,r),o&&on(n,o),t}(St)}]);